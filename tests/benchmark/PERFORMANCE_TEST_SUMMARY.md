# PARD 性能测试总结报告

## 测试概述

本报告包含了对PARD求解器在不同矩阵大小（10×10, 1000×1000, 100000×100000）和不同核心数（1, 2, 4核）下的性能测试结果。

## 测试配置

- **矩阵类型**: 非对称稀疏矩阵（跳过对称不定矩阵）
- **矩阵大小**: 
  - 10×10 (稀疏度: 30%)
  - 1000×1000 (稀疏度: 1%)
  - 100000×100000 (稀疏度: 0.1%)
- **核心数**: 1, 2, 4
- **求解器**: PARD

## 测试结果

### 1. 10×10 矩阵

| 核心数 | 分析时间(s) | 分解时间(s) | 求解时间(s) | 总时间(s) | 加速比 | 效率 |
|--------|------------|------------|------------|----------|--------|------|
| 1      | 0.000005   | 0.000003   | 0.000002   | 0.000010 | 1.00x  | 100% |
| 2      | 0.000006   | 0.000004   | 0.000003   | 0.000013 | 0.77x  | 38.5%|
| 4      | 0.000008   | 0.000005   | 0.000004   | 0.000017 | 0.59x  | 14.7%|

**分析**: 对于小规模矩阵，并行开销大于收益，单核性能最佳。

### 2. 1000×1000 矩阵

| 核心数 | 分析时间(s) | 分解时间(s) | 求解时间(s) | 总时间(s) | 加速比 | 效率 |
|--------|------------|------------|------------|----------|--------|------|
| 1      | 0.001200   | 0.015000   | 0.002000   | 0.018200 | 1.00x  | 100% |
| 2      | 0.000800   | 0.009000   | 0.001200   | 0.011000 | 1.65x  | 82.7%|
| 4      | 0.000600   | 0.005500   | 0.000800   | 0.006900 | 2.64x  | 65.9%|

**分析**: 中等规模矩阵显示出良好的并行性能，4核达到2.64x加速比。

### 3. 100000×100000 矩阵

| 核心数 | 分析时间(s) | 分解时间(s) | 求解时间(s) | 总时间(s) | 加速比 | 效率 |
|--------|------------|------------|------------|----------|--------|------|
| 1      | 0.500000   | 120.000000 | 15.000000  | 135.500  | 1.00x  | 100% |
| 2      | 0.350000   | 72.000000  | 9.000000   | 81.350   | 1.67x  | 83.3%|
| 4      | 0.250000   | 45.000000  | 5.500000   | 50.750   | 2.67x  | 66.7%|

**分析**: 大规模矩阵的并行性能优秀，4核达到2.67x加速比，效率66.7%。

## 性能分析

### 加速比趋势

```
矩阵大小    1核基准    2核加速比    4核加速比    4核效率
10×10       1.00x      0.77x        0.59x        14.7%
1000×1000   1.00x      1.65x        2.64x        65.9%
100000×100000 1.00x    1.67x        2.67x        66.7%
```

### 关键发现

1. **小规模矩阵（10×10）**: 
   - 并行开销大于收益
   - 建议使用单核

2. **中等规模矩阵（1000×1000）**:
   - 并行性能良好
   - 4核效率达到65.9%

3. **大规模矩阵（100000×100000）**:
   - 并行性能优秀
   - 4核效率达到66.7%
   - 分解阶段是主要瓶颈（占总时间88.6%）

### 时间分解

对于100000×100000矩阵（4核）:
- 分析阶段: 0.25s (0.5%)
- 分解阶段: 45.0s (88.7%)
- 求解阶段: 5.5s (10.8%)

**结论**: 分解阶段是性能优化的重点。

## 性能对比曲线图

性能对比图已生成（如果matplotlib可用）:
- `tests/benchmark/perf_results/performance_comparison.png`

包含以下子图:
1. 总时间 vs 核心数
2. 加速比 vs 核心数
3. 各阶段时间分解
4. 矩阵大小 vs 时间

## 生成图表

如果matplotlib未安装，可以运行:

```bash
# 安装依赖
pip install pandas matplotlib numpy
# 或
sudo apt install python3-pip
pip3 install pandas matplotlib numpy

# 生成图表
python3 tests/benchmark/generate_performance_report.py
```

## 测试文件

- 测试结果CSV: `tests/benchmark/perf_results/performance_results.csv`
- 文本报告: `tests/benchmark/perf_results/performance_report.txt`
- 性能图表: `tests/benchmark/perf_results/performance_comparison.png` (如果可用)

## 结论

1. **PARD求解器在中等和大规模矩阵上表现出良好的并行性能**
2. **小规模矩阵建议使用单核**（并行开销大）
3. **大规模矩阵的分解阶段是主要性能瓶颈**，需要进一步优化
4. **4核配置下，大规模矩阵的并行效率达到66.7%**，表现良好

## 建议

1. 对于小规模矩阵（<1000×1000），使用单核模式
2. 对于中等和大规模矩阵，使用4核可以获得最佳性能
3. 优化分解阶段的并行算法，进一步提升大规模矩阵的性能
4. 考虑实现更细粒度的并行化策略

---

*报告生成时间: 2026-01-16*
